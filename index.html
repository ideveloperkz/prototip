<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–Ω–æ–ø–æ–ª–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            min-height: 100vh;
        }

        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .board-container {
            flex: 1;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            min-width: 300px;
        }

        .board {
            width: 600px;
            height: 600px;
            background: #2d5016;
            position: relative;
            border: 4px solid #333;
            border-radius: 10px;
            margin: 0 auto;
        }

        .center-area {
            position: absolute;
            top: 80px;
            left: 80px;
            right: 80px;
            bottom: 80px;
            background: #4a7c1a;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .cell {
            position: absolute;
            border: 2px solid #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            text-align: center;
            padding: 2px;
            box-sizing: border-box;
            color: white;
        }

        .cell.corner {
            width: 80px;
            height: 80px;
            font-size: 12px;
        }

        .cell.regular {
            width: 60px;
            height: 45px;
        }

        /* –¶–≤–µ—Ç–∞ –∫–ª–µ—Ç–æ–∫ (–∞–Ω–∞–ª–æ–≥ Tailwind) */
        .bg-green-500 { background: #22c55e; }
        .bg-amber-600 { background: #d97706; }
        .bg-blue-400 { background: #60a5fa; }
        .bg-red-500 { background: #ef4444; }
        .bg-gray-600 { background: #4b5563; }
        .bg-cyan-500 { background: #06b6d4; }
        .bg-purple-400 { background: #a78bfa; }
        .bg-orange-500 { background: #f97316; }
        .bg-pink-500 { background: #ec4899; }
        .bg-yellow-400 { background: #facc15; }
        .bg-orange-400 { background: #fb923c; }
        .bg-green-400 { background: #4ade80; }
        .bg-red-600 { background: #dc2626; }
        .bg-yellow-500 { background: #eab308; }
        .bg-blue-300 { background: #93c5fd; }
        .bg-red-700 { background: #b91c1c; }
        .bg-green-600 { background: #16a34a; }
        .bg-blue-800 { background: #1e40af; }

        .cell-price {
            font-size: 8px;
            color: #fef9c3; /* –ê–Ω–∞–ª–æ–≥ text-yellow-200 */
        }

        .owner-marker {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .owner-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .players-on-cell {
            position: absolute;
            bottom: -15px;
            display: flex;
            gap: 2px;
        }

        .player-token {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid #333;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: bold;
        }

        /* –¶–≤–µ—Ç–∞ –∏–≥—Ä–æ–∫–æ–≤ */
        .player-0 { color: #dc2626; } /* text-red-600 */
        .player-1 { color: #2563eb; } /* text-blue-600 */
        .player-2 { color: #ca8a04; } /* text-yellow-600 */
        .player-3 { color: #9333ea; } /* text-purple-600 */
        .bg-player-0 { background: #dc2626; } /* bg-red-600 */
        .bg-player-1 { background: #2563eb; } /* bg-blue-600 */
        .bg-player-2 { background: #ca8a04; } /* bg-yellow-600 */
        .bg-player-3 { background: #9333ea; } /* bg-purple-600 */

        .info-panel {
            width: 100%;
            max-width: 350px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .player-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #ccc;
        }

        .player-card.active {
            border-left-color: #2563eb;
            background: #ebf3fd;
        }

        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .dice-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 10px 0;
        }

        .dice {
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid #333;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }

        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }

        button:hover {
            background: #1d4ed8;
        }

        button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .buy-dialog {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 2px solid #2563eb;
            margin-bottom: 20px;
        }

        .game-log {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
        }

        .log-entry {
            margin-bottom: 5px;
            font-size: 13px;
            border-bottom: 1px solid #eee;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            .board {
                width: 100%;
                height: auto;
                aspect-ratio: 1/1;
            }
            .cell {
                font-size: 2vw;
            }
            .cell.corner {
                width: 13vw;
                height: 13vw;
            }
            .cell.regular {
                width: 10vw;
                height: 7.5vw;
            }
            .center-area {
                top: 13%;
                left: 13%;
                right: 13%;
                bottom: 13%;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="board-container">
            <div class="board" id="gameBoard">
                <div class="center-area">
                    <h1>–ú–û–ù–û–ü–û–õ–ò–Ø</h1>
                    <p>–•–æ–¥ –∏–≥—Ä–æ–∫–∞: <span id="currentPlayerName">–ò–≥—Ä–æ–∫ 1</span></p>
                    <div class="dice-container">
                        <div class="dice" id="dice1">‚öÄ</div>
                        <div class="dice" id="dice2">‚öÄ</div>
                    </div>
                    <button id="rollDiceBtn" onclick="rollDice()">–ë—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏</button>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <div class="controls" id="buyDialog" style="display: none;">
                <h3>–ö—É–ø–∏—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å?</h3>
                <p id="propertyName"></p>
                <p id="propertyPrice"></p>
                <p id="propertyRent"></p>
                <div>
                    <button id="buyBtn" onclick="buyProperty()">–ö—É–ø–∏—Ç—å</button>
                    <button onclick="skipProperty()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                </div>
            </div>

            <div class="players-info" id="playersInfo"></div>

            <div class="game-log" id="gameLog">
                <div class="log-entry">–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!</div>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        const BOARD_CELLS = [
            { id: 0, name: "–°–¢–ê–†–¢", type: "start", color: "bg-green-500" },
            { id: 1, name: "–ë—É–ª—å–≤–∞—Ä –õ–µ—Å–Ω–æ–π", type: "property", price: 100, rent: 10, color: "bg-amber-600", group: "brown" },
            { id: 2, name: "–®–∞–Ω—Å", type: "chance", color: "bg-blue-400" },
            { id: 3, name: "–£–ª. –ú–∞–ª–∞—è –ì—Ä—É–∑–∏–Ω—Å–∫–∞—è", type: "property", price: 120, rent: 12, color: "bg-amber-600", group: "brown" },
            { id: 4, name: "–ù–∞–ª–æ–≥", type: "tax", color: "bg-red-500", amount: 200 },
            { id: 5, name: "–†–∏–∂—Å–∫–∏–π –≤–æ–∫–∑–∞–ª", type: "station", price: 200, rent: 50, color: "bg-gray-600" },
            { id: 6, name: "–†–æ–≥–æ–∂—Å–∫–∏–π –í–∞–ª", type: "property", price: 140, rent: 14, color: "bg-cyan-500", group: "lightblue" },
            { id: 7, name: "–ö–∞–∑–Ω–∞", type: "chest", color: "bg-purple-400" },
            { id: 8, name: "–£–ª. –°—Ç—Ä–æ–º—ã–Ω–∫–∞", type: "property", price: 140, rent: 14, color: "bg-cyan-500", group: "lightblue" },
            { id: 9, name: "–°–æ–∫–æ–ª—å–Ω–∏—á–µ—Å–∫–∞—è –ø–ª.", type: "property", price: 160, rent: 16, color: "bg-cyan-500", group: "lightblue" },
            { id: 10, name: "–¢–Æ–†–¨–ú–ê", type: "jail", color: "bg-orange-500" },
            { id: 11, name: "–£–ª. –ü–æ–ª—è–Ω–∫–∞", type: "property", price: 180, rent: 18, color: "bg-pink-500", group: "pink" },
            { id: 12, name: "–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏—è", type: "utility", price: 150, color: "bg-yellow-400" },
            { id: 13, name: "–£–ª. –ù–∏–∫–æ–ª—å—Å–∫–∞—è", type: "property", price: 180, rent: 18, color: "bg-pink-500", group: "pink" },
            { id: 14, name: "–¢–≤–µ—Ä—Å–∫–∞—è —É–ª.", type: "property", price: 200, rent: 20, color: "bg-pink-500", group: "pink" },
            { id: 15, name: "–ö—É—Ä—Å–∫–∏–π –≤–æ–∫–∑–∞–ª", type: "station", price: 200, rent: 50, color: "bg-gray-600" },
            { id: 16, name: "–£–ª. –í–∞—Ä–≤–∞—Ä–∫–∞", type: "property", price: 220, rent: 22, color: "bg-orange-400", group: "orange" },
            { id: 17, name: "–®–∞–Ω—Å", type: "chance", color: "bg-blue-400" },
            { id: 18, name: "–ê—Ä–±–∞—Ç", type: "property", price: 220, rent: 22, color: "bg-orange-400", group: "orange" },
            { id: 19, name: "–°–º–æ–ª–µ–Ω—Å–∫–∞—è –ø–ª.", type: "property", price: 240, rent: 24, color: "bg-orange-400", group: "orange" },
            { id: 20, name: "–û–¢–î–´–•", type: "parking", color: "bg-green-400" },
            { id: 21, name: "–£–ª. –ü–µ—Ç—Ä–æ–≤–∫–∞", type: "property", price: 260, rent: 26, color: "bg-red-600", group: "red" },
            { id: 22, name: "–ö–∞–∑–Ω–∞", type: "chest", color: "bg-purple-400" },
            { id: 23, name: "–û—Ö–æ—Ç–Ω—ã–π —Ä—è–¥", type: "property", price: 260, rent: 26, color: "bg-red-600", group: "red" },
            { id: 24, name: "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å", type: "property", price: 280, rent: 28, color: "bg-red-600", group: "red" },
            { id: 25, name: "–ü–∞–≤–µ–ª–µ—Ü–∫–∏–π –≤–æ–∫–∑–∞–ª", type: "station", price: 200, rent: 50, color: "bg-gray-600" },
            { id: 26, name: "–¢–≤–µ—Ä—Å–∫–æ–π –±—É–ª—å–≤–∞—Ä", type: "property", price: 300, rent: 30, color: "bg-yellow-500", group: "yellow" },
            { id: 27, name: "–ü—É—à–∫–∏–Ω—Å–∫–∞—è –ø–ª.", type: "property", price: 300, rent: 30, color: "bg-yellow-500", group: "yellow" },
            { id: 28, name: "–í–æ–¥–æ–ø—Ä–æ–≤–æ–¥", type: "utility", price: 150, color: "bg-blue-300" },
            { id: 29, name: "–ö—É–∑–Ω–µ—Ü–∫–∏–π –º–æ—Å—Ç", type: "property", price: 320, rent: 32, color: "bg-yellow-500", group: "yellow" },
            { id: 30, name: "–ò–î–¢–ò –í –¢–Æ–†–¨–ú–£", type: "go_to_jail", color: "bg-red-700" },
            { id: 31, name: "–£–ª. –û—Å—Ç–æ–∂–µ–Ω–∫–∞", type: "property", price: 350, rent: 35, color: "bg-green-600", group: "green" },
            { id: 32, name: "–ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è –Ω–∞–±.", type: "property", price: 350, rent: 35, color: "bg-green-600", group: "green" },
            { id: 33, name: "–ö–∞–∑–Ω–∞", type: "chest", color: "bg-purple-400" },
            { id: 34, name: "–ù–æ–≤—ã–π –ê—Ä–±–∞—Ç", type: "property", price: 400, rent: 40, color: "bg-green-600", group: "green" },
            { id: 35, name: "–ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –≤–æ–∫–∑–∞–ª", type: "station", price: 200, rent: 50, color: "bg-gray-600" },
            { id: 36, name: "–®–∞–Ω—Å", type: "chance", color: "bg-blue-400" },
            { id: 37, name: "–£–ª. –ê—Ä–±–∞—Ç", type: "property", price: 450, rent: 45, color: "bg-blue-800", group: "darkblue" },
            { id: 38, name: "–ù–∞–ª–æ–≥ –Ω–∞ —Ä–æ—Å–∫–æ—à—å", type: "tax", color: "bg-red-500", amount: 300 },
            { id: 39, name: "–ö—Ä–∞—Å–Ω–∞—è –ü—Ä–µ—Å–Ω—è", type: "property", price: 500, rent: 50, color: "bg-blue-800", group: "darkblue" }
        ];

        const PLAYER_TOKENS = ['üë§', 'üöó', 'üëë', '‚ö°'];
        const DICE_FACES = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            players: [
                { id: 0, name: "–ò–≥—Ä–æ–∫ 1", position: 0, money: 1500, properties: [], inJail: false },
                { id: 1, name: "–ò–≥—Ä–æ–∫ 2", position: 0, money: 1500, properties: [], inJail: false },
                { id: 2, name: "–ò–≥—Ä–æ–∫ 3", position: 0, money: 1500, properties: [], inJail: false },
                { id: 3, name: "–ò–≥—Ä–æ–∫ 4", position: 0, money: 1500, properties: [], inJail: false }
            ],
            currentPlayerIndex: 0,
            dice1: 1,
            dice2: 1,
            gameLog: ["–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!"],
            selectedProperty: null,
            ownedProperties: {}
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            createBoard();
            updatePlayersInfo();
            updateCurrentPlayer();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function createBoard() {
            const board = document.getElementById('gameBoard');
            BOARD_CELLS.forEach((cell, index) => {
                const cellDiv = document.createElement('div');
                const isCorner = [0, 10, 20, 30].includes(index);
                const position = getCellPosition(index);
                cellDiv.className = `cell ${isCorner ? 'corner' : 'regular'} ${cell.color}`;
                cellDiv.id = `cell-${cell.id}`;
                cellDiv.style.left = `${position.x * 60}px`;
                cellDiv.style.top = `${position.y * 60}px`;
                cellDiv.style.transform = isCorner ? 'none' : (
                    index <= 10 ? 'rotate(-90deg)' :
                    index <= 20 ? 'none' :
                    index <= 30 ? 'rotate(90deg)' : 'rotate(180deg)'
                );

                cellDiv.innerHTML = `
                    <div class="${isCorner ? 'text-xs' : 'text-[10px]'} text-center">
                        ${cell.name.length > 12 && !isCorner ? cell.name.substring(0, 10) + '...' : cell.name}
                    </div>
                    ${cell.price ? `<div class="cell-price">${cell.price}‚ÇΩ</div>` : ''}
                    <div class="owner-marker" id="owner-${cell.id}" style="display: none;">
                        <div class="owner-dot"></div>
                    </div>
                    <div class="players-on-cell" id="players-${cell.id}"></div>
                `;

                board.appendChild(cellDiv);
            });
            updatePlayerPositions();
        }

        // –ü–æ–∑–∏—Ü–∏–∏ –∫–ª–µ—Ç–æ–∫
        function getCellPosition(index) {
            const cellsPerSide = 10;
            if (index <= 10) {
                return { x: 9 - index, y: 9 };
            } else if (index <= 20) {
                return { x: 0, y: 19 - index };
            } else if (index <= 30) {
                return { x: index - 20, y: 0 };
            } else {
                return { x: 9, y: index - 30 };
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏–≥—Ä–æ–∫–æ–≤
        function updatePlayerPositions() {
            BOARD_CELLS.forEach(cell => {
                const playersDiv = document.getElementById(`players-${cell.id}`);
                playersDiv.innerHTML = '';
                gameState.players.forEach(player => {
                    if (player.position === cell.id) {
                        const token = document.createElement('div');
                        token.className = `player-token player-${player.id}`;
                        token.textContent = PLAYER_TOKENS[player.id];
                        playersDiv.appendChild(token);
                    }
                });

                const ownerMarker = document.getElementById(`owner-${cell.id}`);
                if (gameState.ownedProperties[cell.id] !== undefined) {
                    ownerMarker.style.display = 'flex';
                    ownerMarker.querySelector('.owner-dot').className = `owner-dot bg-player-${gameState.ownedProperties[cell.id]}`;
                } else {
                    ownerMarker.style.display = 'none';
                }
            });
        }

        // –ë—Ä–æ—Å–∞–Ω–∏–µ –∫–æ—Å—Ç–µ–π
        function rollDice() {
            const newDice1 = Math.floor(Math.random() * 6) + 1;
            const newDice2 = Math.floor(Math.random() * 6) + 1;
            gameState.dice1 = newDice1;
            gameState.dice2 = newDice2;

            document.getElementById('dice1').textContent = DICE_FACES[newDice1 - 1];
            document.getElementById('dice2').textContent = DICE_FACES[newDice2 - 1];

            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            const totalRoll = newDice1 + newDice2;
            const newPosition = (currentPlayer.position + totalRoll) % 40;

            addToLog(`${currentPlayer.name} –≤—ã–±—Ä–æ—Å–∏–ª ${newDice1} + ${newDice2} = ${totalRoll}`);

            if (newPosition < currentPlayer.position) {
                currentPlayer.money += 200;
                addToLog(`${currentPlayer.name} –ø—Ä–æ—à–µ–ª —á–µ—Ä–µ–∑ –°–¢–ê–†–¢ –∏ –ø–æ–ª—É—á–∏–ª 200‚ÇΩ!`);
            }
            currentPlayer.position = newPosition;

            const cell = BOARD_CELLS[newPosition];
            addToLog(`${currentPlayer.name} –ø–æ–ø–∞–ª –Ω–∞ "${cell.name}"`);

            updatePlayerPositions();
            updatePlayersInfo();

            setTimeout(() => {
                handleCellAction(newPosition, currentPlayer.id);
            }, 500);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –∫–ª–µ—Ç–∫–µ
        function handleCellAction(position, playerId) {
            const cell = BOARD_CELLS[position];
            const player = gameState.players.find(p => p.id === playerId);

            switch (cell.type) {
                case 'property':
                case 'station':
                case 'utility':
                    if (gameState.ownedProperties[position] !== undefined) {
                        const owner = gameState.players.find(p => p.id === gameState.ownedProperties[position]);
                        if (owner && owner.id !== playerId) {
                            const rent = cell.rent || 50;
                            player.money = Math.max(0, player.money - rent);
                            owner.money += rent;
                            addToLog(`${player.name} –∑–∞–ø–ª–∞—Ç–∏–ª ${rent}‚ÇΩ –∞—Ä–µ–Ω–¥—ã –∏–≥—Ä–æ–∫—É ${owner.name}`);
                            updatePlayersInfo();
                            nextPlayer();
                        } else {
                            nextPlayer();
                        }
                    } else {
                        gameState.selectedProperty = cell;
                        showBuyDialog(cell);
                    }
                    break;

                case 'tax':
                    const taxAmount = cell.amount || 100;
                    player.money = Math.max(0, player.money - taxAmount);
                    addToLog(`${player.name} –∑–∞–ø–ª–∞—Ç–∏–ª –Ω–∞–ª–æ–≥ ${taxAmount}‚ÇΩ`);
                    updatePlayersInfo();
                    nextPlayer();
                    break;

                case 'go_to_jail':
                    player.position = 10;
                    player.inJail = true;
                    addToLog(`${player.name} –ø–æ–ø–∞–ª –≤ —Ç—é—Ä—å–º—É!`);
                    updatePlayerPositions();
                    updatePlayersInfo();
                    nextPlayer();
                    break;

                case 'chance':
                case 'chest':
                    const bonus = Math.floor(Math.random() * 200) + 50;
                    player.money += bonus;
                    addToLog(`${player.name} –ø–æ–ª—É—á–∏–ª ${bonus}‚ÇΩ!`);
                    updatePlayersInfo();
                    nextPlayer();
                    break;

                default:
                    nextPlayer();
                    break;
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –ø–æ–∫—É–ø–∫–∏
        function showBuyDialog(cell) {
            const buyDialog = document.getElementById('buyDialog');
            buyDialog.style.display = 'block';
            document.getElementById('propertyName').textContent = cell.name;
            document.getElementById('propertyPrice').textContent = `–¶–µ–Ω–∞: ${cell.price}‚ÇΩ`;
            document.getElementById('propertyRent').textContent = cell.rent ? `–ê—Ä–µ–Ω–¥–∞: ${cell.rent}‚ÇΩ` : '';
            document.getElementById('buyBtn').disabled = gameState.players[gameState.currentPlayerIndex].money < cell.price;
            document.getElementById('rollDiceBtn').disabled = true;
        }

        // –ö—É–ø–∏—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
        function buyProperty() {
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            if (currentPlayer.money >= gameState.selectedProperty.price) {
                currentPlayer.money -= gameState.selectedProperty.price;
                currentPlayer.properties.push(gameState.selectedProperty.id);
                gameState.ownedProperties[gameState.selectedProperty.id] = currentPlayer.id;
                addToLog(`${currentPlayer.name} –∫—É–ø–∏–ª "${gameState.selectedProperty.name}" –∑–∞ ${gameState.selectedProperty.price}‚ÇΩ`);
            } else {
                addToLog(`–£ ${currentPlayer.name} –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏`);
            }
            hideBuyDialog();
            updatePlayerPositions();
            updatePlayersInfo();
            nextPlayer();
        }

        // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–∫—É–ø–∫—É
        function skipProperty() {
            addToLog(`${gameState.players[gameState.currentPlayerIndex].name} –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç –ø–æ–∫—É–ø–∫–∏`);
            hideBuyDialog();
            nextPlayer();
        }

        // –°–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ –ø–æ–∫—É–ø–∫–∏
        function hideBuyDialog() {
            document.getElementById('buyDialog').style.display = 'none';
            gameState.selectedProperty = null;
            document.getElementById('rollDiceBtn').disabled = false;
        }

        // –°–ª–µ–¥—É—é—â–∏–π –∏–≥—Ä–æ–∫
        function nextPlayer() {
            gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % gameState.players.length;
            updateCurrentPlayer();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
        function updateCurrentPlayer() {
            document.getElementById('currentPlayerName').textContent = gameState.players[gameState.currentPlayerIndex].name;
            updatePlayersInfo();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–≥—Ä–æ–∫–∞—Ö
        function updatePlayersInfo() {
            const container = document.getElementById('playersInfo');
            container.innerHTML = '';
            gameState.players.forEach((player, index) => {
                const card = document.createElement('div');
                card.className = `player-card ${index === gameState.currentPlayerIndex ? 'active' : ''}`;
                card.innerHTML = `
                    <span class="player-token player-${player.id}">${PLAYER_TOKENS[player.id]}</span>
                    <strong>${player.name}</strong><br>
                    –î–µ–Ω—å–≥–∏: ${player.money}‚ÇΩ<br>
                    –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å: ${player.properties.length}<br>
                    ${player.inJail ? '<span style="color: #ef4444;">–í —Ç—é—Ä—å–º–µ</span>' : ''}
                `;
                container.appendChild(card);
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ª–æ–≥
        function addToLog(message) {
            gameState.gameLog.push(message);
            if (gameState.gameLog.length > 10) {
                gameState.gameLog.shift();
            }
            const log = document.getElementById('gameLog');
            log.innerHTML = '';
            gameState.gameLog.forEach(message => {
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.textContent = message;
                log.appendChild(entry);
            });
            log.scrollTop = log.scrollHeight;
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.onload = function() {
            initGame();
        };
    </script>
</body>
</html>
